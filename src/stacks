// dispatch document addEventListener
getFiberCurrentPropsFromNode$1 (react-dom.development.js:7955)
getListener (react-dom.development.js:8145)
listenerAtPhase (react-dom.development.js:8173)
accumulateDirectionalDispatches (react-dom.development.js:8200)
traverseTwoPhase (react-dom.development.js:8036)
accumulateTwoPhaseDispatchesSingle (react-dom.development.js:8218)
forEachAccumulated (react-dom.development.js:3259)
accumulateTwoPhaseDispatches (react-dom.development.js:8253)
extractEvents (react-dom.development.js:10167)
extractPluginEvents (react-dom.development.js:3501)
runExtractedPluginEventsInBatch (react-dom.development.js:3513)
handleTopLevel (react-dom.development.js:3558)
batchedEventUpdates$1 (react-dom.development.js:21871)
batchedEventUpdates (react-dom.development.js:795)
dispatchEventForLegacyPluginEventSystem (react-dom.development.js:3568)
attemptToDispatchEvent (react-dom.development.js:4267)
dispatchEvent (react-dom.development.js:4189)
unstable_runWithPriority (scheduler.development.js:653)
runWithPriority$1 (react-dom.development.js:11039)
discreteUpdates$1 (react-dom.development.js:21887)
discreteUpdates (react-dom.development.js:806)
dispatchDiscreteEvent (react-dom.development.js:4168)


// Element addEventListener
(anonymous) (EventTarget-impl.js:43)
setTimeout (async)
addEventListener (EventTarget-impl.js:41)
appendHandler (create-event-accessor.js:9)
_setEventHandlerFor (GlobalEventHandlers-impl.js:65)
set (create-event-accessor.js:168)
set onclick (HTMLElement.js:591)
trapClickOnNonInteractiveElement (react-dom.development.js:5780)
setInitialProperties (react-dom.development.js:6054)
+++++

// first document addEventListener
(anonymous) (EventTarget-impl.js:43)
setTimeout (async)
addEventListener (EventTarget-impl.js:41)
addEventListener (EventTarget.js:125)
addEventBubbleListener (react-dom.development.js:4027)
trapEventForPluginEventSystem (react-dom.development.js:4162)
trapBubbledEvent (react-dom.development.js:4133)
legacyListenToTopLevelEvent (react-dom.development.js:3642)
legacyListenToEvent (react-dom.development.js:3601)
ensureListeningTo (react-dom.development.js:5761)
setInitialDOMProperties (react-dom.development.js:5828)
+++++

finalizeInitialChildren (react-dom.development.js:7499)
completeWork (react-dom.development.js:18978)
completeUnitOfWork (react-dom.development.js:22189)
performUnitOfWork (react-dom.development.js:22165)
workLoopSync (react-dom.development.js:22130)
performSyncWorkOnRoot (react-dom.development.js:21756)
scheduleUpdateOnFiber (react-dom.development.js:21188)
updateContainer (react-dom.development.js:24373)
(anonymous) (react-dom.development.js:24758)
unbatchedUpdates (react-dom.development.js:21903)
legacyRenderSubtreeIntoContainer (react-dom.development.js:24757)
render (react-dom.development.js:24840)
(anonymous) (index.worker.tsx:20)
emit (events.js:152)
emit (Bridge.ts:149)
(anonymous) (Bridge.ts:63)
webworker.onmessage (createBridge.ts:26)
Worker.postMessage (async)
postMessage (createBridge.ts:9)
publish (Bridge.ts:117)
./src/WorkerDemo/index.tsx (index.tsx:19)
__webpack_require__ (bootstrap:784)
fn (bootstrap:150)
./src/index.js (index.js:1)
__webpack_require__ (bootstrap:784)
fn (bootstrap:150)
1 (utils.js:87)
__webpack_require__ (bootstrap:784)
checkDeferredModules (bootstrap:45)
webpackJsonpCallback (bootstrap:32)
(anonymous) (main.chunk.js:1)



// add onChange error
react-dom.development.js:19527 The above error occurred in the <WorkerDemo> component:
    in WorkerDemo (at WorkerDemo/index.worker.tsx:20)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://fb.me/react-error-boundaries to learn more about error boundaries.

logCapturedError	@	react-dom.development.js:19527
logError	@	react-dom.development.js:19564
update.callback	@	react-dom.development.js:20708
callCallback	@	react-dom.development.js:12490
commitUpdateQueue	@	react-dom.development.js:12511
commitLifeCycles	@	react-dom.development.js:19883
commitLayoutEffects	@	react-dom.development.js:22803
invokeGuardedCallbackImpl	@	react-dom.development.js:113
invokeGuardedCallback	@	react-dom.development.js:292
commitRootImpl	@	react-dom.development.js:22541
unstable_runWithPriority	@	scheduler.development.js:653
runWithPriority$1	@	react-dom.development.js:11039
commitRoot	@	react-dom.development.js:22381
finishSyncRender	@	react-dom.development.js:21807
performSyncWorkOnRoot	@	react-dom.development.js:21793
scheduleUpdateOnFiber	@	react-dom.development.js:21188
updateContainer	@	react-dom.development.js:24373
(anonymous)	@	react-dom.development.js:24758
unbatchedUpdates	@	react-dom.development.js:21903
legacyRenderSubtreeIntoContainer	@	react-dom.development.js:24757
render	@	react-dom.development.js:24840
(anonymous)	@	index.worker.tsx:20
emit	@	events.js:152
emit	@	Bridge.ts:169
(anonymous)	@	Bridge.ts:71
webworker.onmessage	@	createBridge.ts:27


// appendChild stack
insertBefore (element.ts:66)
handleInvokeRequestEvent (Bridge.ts:203)
emit (Bridge.ts:160)
(anonymous) (Bridge.ts:71)
wrap (createBridge.ts:24)
postMessage (async)
postMessage (createBridge.ts:12)
invoke (Bridge.ts:81)
_preInsert (Node-impl.js:781)
_append (Node-impl.js:885)
appendChild (Node-impl.js:631)
appendChild (Node.js:367)
appendInitialChild (react-dom.development.js:7496)
appendAllChildren (react-dom.development.js:18737)
completeWork (react-dom.development.js:18971)
completeUnitOfWork (react-dom.development.js:22189)
performUnitOfWork (react-dom.development.js:22165)
workLoopSync (react-dom.development.js:22130)
performSyncWorkOnRoot (react-dom.development.js:21756)
scheduleUpdateOnFiber (react-dom.development.js:21188)
updateContainer (react-dom.development.js:24373)
(anonymous) (react-dom.development.js:24758)
unbatchedUpdates (react-dom.development.js:21903)
legacyRenderSubtreeIntoContainer (react-dom.development.js:24757)
render (react-dom.development.js:24840)
(anonymous) (index.worker.tsx:20)
emit (events.js:152)
emit (Bridge.ts:169)
(anonymous) (Bridge.ts:71)
webworker.onmessage (createBridge.ts:27)
Worker.postMessage (async)
postMessage (createBridge.ts:10)
publish (Bridge.ts:129)
(anonymous) (index.tsx:22)
emit (events.js:156)
emit (Bridge.ts:169)
(anonymous) (Bridge.ts:71)
wrap (createBridge.ts:24)
postMessage (async)
postMessage (createBridge.ts:12)
publish (Bridge.ts:129)
bootstrap (bootstrap.ts:33)
./node_modules/babel-loader/lib/index.js?!./src/WorkerDemo/index.worker.tsx (index.worker.tsx:9)
__webpack_require__ (bootstrap:19)
(anonymous) (bootstrap:83)
(anonymous) (bootstrap:83)
Worker Created (async)
push../src/WorkerDemo/index.worker.tsx.module.exports (index.worker.tsx:2)
./src/WorkerDemo/index.tsx (index.tsx:7)
__webpack_require__ (bootstrap:784)
fn (bootstrap:150)
./src/index.js (index.js:1)
__webpack_require__ (bootstrap:784)
fn (bootstrap:150)
1 (utils.js:87)
__webpack_require__ (bootstrap:784)
checkDeferredModules (bootstrap:45)
webpackJsonpCallback (bootstrap:32)
(anonymous) (main.chunk.js:1)


var setTextContent = function (node, text) {
  if (text) {
    var firstChild = node.firstChild;

    if (firstChild && firstChild === node.lastChild && firstChild.nodeType === TEXT_NODE) {
      firstChild.nodeValue = text;
      return;
    }
  }

  node.textContent = text;
};



WorkerDemo.handleClick (WorkerDemo.tsx:9)
invokeGuardedCallbackImpl (react-dom.development.js:113)
invokeGuardedCallback (react-dom.development.js:292)
invokeGuardedCallbackAndCatchFirstError (react-dom.development.js:306)
executeDispatch (react-dom.development.js:389)
// _dispatchListeners 为空, extractPluginEvents 添加的  possiblePlugin.extractEvents accumulateTwoPhaseDispatchesSingle
executeDispatchesInOrder (react-dom.development.js:414)
executeDispatchesAndRelease (react-dom.development.js:3278)
executeDispatchesAndReleaseTopLevel (react-dom.development.js:3287)
forEachAccumulated (react-dom.development.js:3259)
runEventsInBatch (react-dom.development.js:3304)
runExtractedPluginEventsInBatch (react-dom.development.js:3514)
handleTopLevel (react-dom.development.js:3558)
batchedEventUpdates$1 (react-dom.development.js:21871)
batchedEventUpdates (react-dom.development.js:795)
dispatchEventForLegacyPluginEventSystem (react-dom.development.js:3568)
attemptToDispatchEvent (react-dom.development.js:4267)
dispatchEvent (react-dom.development.js:4189)
unstable_runWithPriority (scheduler.development.js:653)
runWithPriority$1 (react-dom.development.js:11039)
discreteUpdates$1 (react-dom.development.js:21887)
discreteUpdates (react-dom.development.js:806)
dispatchDiscreteEvent (react-dom.development.js:4168)
(anonymous) (IPCObjectManager.ts:39)
emit (events.js:152)
emit (Bridge.ts:169)
(anonymous) (Bridge.ts:71)
webworker.onmessage (createBridge.ts:27)
Worker.postMessage (async)
postMessage (createBridge.ts:10)
publish (Bridge.ts:129)
ipcFunctionMirror (IPCFunction.ts:21)


getClosestInstanceFromNode
targetInst 为 null



altKey: undefined
bubbles: true
button: undefined
buttons: undefined
cancelable: true
clientX: undefined
clientY: undefined
ctrlKey: undefined
currentTarget: null
defaultPrevented: false
detail: undefined
dispatchConfig: {phasedRegistrationNames: {…}, dependencies: Array(1), eventPriority: 0}
eventPhase: 3
getModifierState: ƒ modifierStateGetter(keyArg)
isDefaultPrevented: ƒ functionThatReturnsFalse()
isPropagationStopped: ƒ functionThatReturnsFalse()
isTrusted: true
metaKey: undefined
movementX: 0
movementY: 0
nativeEvent: Event {Symbol(impl): EventImpl}
pageX: undefined
pageY: undefined
relatedTarget: undefined
screenX: undefined
screenY: undefined
shiftKey: undefined
target: HTMLHeadingElement {__reactInternalInstance$ohbtcw9a3k: FiberNode, __reactEventHandlers$ohbtcw9a3k: {…}, Symbol(impl): HTMLHeadingElementImpl}
timeStamp: 18856.184999924153
type: "click"
view: undefined
_dispatchInstances: FiberNode {tag: 5, key: null, elementType: "div", type: "div", stateNode: HTMLDivElement, …}
_dispatchListeners: evt => { console.log('WorkerDemo click', evt); }
_targetInst: FiberNode {tag: 5, key: null, elementType: "h1", type: "h1", stateNode: HTMLHeadingElement, …}
__proto__: Class


updateValueIfChanged
getTargetInstForInputOrChangeEvent
